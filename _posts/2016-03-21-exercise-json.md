---
title:  "JSON парсер"
categories: JavaScript
date:   2016-03-21 16:00:00 +0300
author_name: "Евгений Бовыкин"
author: missingdays
type: exercise
identifier: exercise-json

description: "Напишите парсер упрощенного JSON формата."

tags: [javascript]
---

Все любят JSON. Поэтому в вашей компании хотят написать свой формат, очень похожий на него, но с дополнительными возможностями. Однако для начала нужно создать основу, и этот таск повесили на вас.

Вам предстоит реализовать простой парсер (десириалайзер?) небольшого формата данных, а в дополнительном задании и генератор (серилиалайзер?). Описание формата ниже.

### Формат
Целое число без ведущих нулей. Опускаем подробности его длины для простоты.
Строка. Начинается и заканчивается `"`. Внутри строки могут быть другие `"`, и они должны быть экранированы. Например, `"\""` - строка, содержащая `"`.
Массив. Начинается с `[` и заканчивается `]`. Все элементы перечисляются через `,`. 
Объект. Начинается с `{` и заканчивается `}`. Внутри объект представляется как пара `ключ:значение`. Ключом является стандартное имя переменной - набор букв, цифр и нижнего подчеркивания. При этом ключ не может начинаться с цифры.

Объекты и массивы могут быть вложенными. 

Каждая строка содержит ровно один объект. Т.е. каждая строка начинается с `{` и заканчивается `}`. 

Вы можете считать, что на вход всегда подается корректная строка.

### Примеры

{% highlight javascript %}

let jsony = new JSONY();

jsony.parse('{ hello: \"world\" }'); // { hello: "world" } - возвращаемый объект
jsony.parse('{ age: 10, height: 120 }'); // { age: 10, height: 120 }
jsony.parse('{ people: [\"Ann\", \"Alice\", \"Bob\"] }'); // { people: ["Ann", "Alice", "Bob"] }
jsony.parse('{ config: { servers: [10, 15, 13], ngnix: { gate: 0, ip: \"127.0.0.1\" } } }');
       /* 
        { 
            config: { 
                servers: [10, 15, 13], 
                ngnix: { 
                   gate : 0, 
                   ip: "127.0.0.1"
                }
            } 
        }
        */
{% endhighlight %}

### Дополнительные задания
Напишите метод `serialize`. Он должен из переданного объекта генерировать строку в формате JSONY. Все строки должны быть экранированы. `jsony.parse(jsony.serialize(obj))` должен всегда равняться `obj`, как и `jsony.serialize(jsony.parse(str))` должен всегда равняться `str`, с точностью до пробела, переноса строки, таба и прочих пробельных символов.

Для особо жаждающих - напишите хорошую обработку ошибок, которая будет говорить, в каком месте возникла ошибка и с чем она связана.

Решение будет опубликовано в понедельник 28 марта.
